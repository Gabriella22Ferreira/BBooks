<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="stylesheet" href="../padrao.css">

    <title>BBooks cadastro</title>
</head>
<body>
    <header>
        <div id="conteinerNav">
            <h1>BBOOKS</h1>
            <div id="itensNav">
                <a href="../Home/index.html">HOME</a>
                <a href="../Home/index.html">SOBRE</a>
                <a href="../Home/index.html">CONTATO</a>
            </div>
            <div id="buttonsNav">
                <a href="../Login/Login.html"><button id="btnUm">LOGIN</button></a> 
                <a href="../Cadastro/cadastro.html"><button id="btnDois">CADASTRO</button></a>
            </div>
        </div>
    </header>

    
    <div id="conteinerForm">
        <div id="form">
            <h1>CADASTRO</h1>
            <p>É sempre bom ter mais o que compartilhar e aprender!</p>
            <form action="cadastro.js" method="post">
                <label>Nome:</label>
                <input type="text" placeholder="Nome" id="ipt_nome">
                <label>Sobrenome:</label>
                <input type="text" placeholder="Sobrenome" id="ipt_sobrenome">
                <label>Idade:</label>
                <input type="number" min="1" placeholder="Idade" id="ipt_idade">
                <label>E-mail:</label>
                <input type="text" placeholder="E-mail" id="ipt_email"> 
                <label>Senha:</label>
                <input type="password" placeholder="Senha" name="" id="ipt_senha">
                <label>Confirmação de senha:</label>
                <input type="password" placeholder="Confirme a Senha" id="ipt_confirmacaoSenha">
            </form>
            <div id="mensagemErro"></div>
                <button id="btnEntrar" onclick="cadastrar()"> CADASTRAR </button>
                <div id="link">
                    <a href="../Login/Login.html">Tem conta?Entre!</a>
                </div>

        </div>
    </div>

</body>
</html>

<script>

    function cadastrar()
    {
        const nome = ipt_nome.value;
        const sobrenome = ipt_sobrenome.value;
        const idade = Number(ipt_idade.value);
        const email = ipt_email.value;
        const senha = ipt_senha.value;
        const confirmacao = ipt_confirmacaoSenha.value;

        let valoresVazios = nome == "" || email == "" || senha == "" || confirmacaoSenha == "" || token == "";
        let nomeMinimo = nome.length < 1;
        let contemArrobaPonto = email.indexOf("@gmail.com") > -1 || email.indexOf("@hotmail.com") > -1 || email.indexOf("@outlook.com") > -1;
        let senhaCaracteresMinimos = senha.length < 8;
        let senhaContemNumero = false;

        // Laço de Repetição para verificação de números na senha.
        for (let contadorNumero = 0; contadorNumero < senha.length; contadorNumero++) 
        {
            for (let contadorIndex = 0; contadorIndex < 9; contadorIndex++) 
            {
                if (senha.indexOf(contadorIndex) != -1) 
                {
                    senhaContemNumero = true;
                }
            }
        }

        if (valoresVazios) 
        {
        // Teste de valores vazios
            mensagemErro.innerHTML = "Todos os campos precisam estar preenchidos.";
         } 
         else if (nomeMinimo) 
         {
            // Teste de nome com pelo menos um caractere.
            mensagemErro.innerHTML = "Nome inválido.";
        } 
        else if (contemArrobaPonto == false) 
        {
            // Teste de @ e . no Email
            mensagemErro.innerHTML = "E-Mail inválido.";
        }
        else if (senhaCaracteresMinimos) 
        {
            // Teste de Tamanho mínimo da Senha
            mensagemErro.innerHTML = "Senha inválida.";
        }
        else if (confirmacaoSenha != senha) 
        {
            // Teste de confirmação Senha = Senha
            mensagemErro.innerHTML = "Senhas não coincidem.";
        } 
        else if (senhaContemNumero == false) 
        {
            // Teste de conter número na senha 
            mensagemErro.innerHTML = "Erro. Senha não contém número.";
        } 
        else 
        {
            alert("Usuário Cadastrado!");
            window.location.href = "../Login/Login.html";

            // Falta redirecionamento para tela de login.
        }

       

    }

</script>